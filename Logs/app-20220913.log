2022-09-13 14:12:40.428 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:13:13.610 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:13:14.511 +03:00 [INF] Executed DbCommand (138ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
2022-09-13 14:13:14.580 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
2022-09-13 14:13:14.618 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-09-13 14:13:14.675 +03:00 [INF] Applying migration '20220913111241_Added soft deletion'.
2022-09-13 14:13:14.856 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = '25101af5-d0b3-4992-b8da-dfcdaa170feb';
2022-09-13 14:13:14.862 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubjectJournal"
WHERE "Id" = '9e45ff36-7191-419e-896e-cdcdf2500683';
2022-09-13 14:13:14.876 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Teachers" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.879 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Subjects" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.882 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubjectJournal" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.887 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Students" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.889 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Lessons" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.892 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Classes" ADD "DateTimeDeleted" timestamp with time zone NULL;
2022-09-13 14:13:14.906 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubjectJournal" ("Id", "ClassId", "DateTimeDeleted", "SubjectId", "TeacherId")
VALUES ('583b2835-3d9e-4941-bcea-3a082f9a6aaf', 1, NULL, 1, 1);
2022-09-13 14:13:14.910 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Id", "BeginDateTime", "DateTimeDeleted", "EndDateTime", "HomeTask", "Marks", "SubjectJournalId")
VALUES ('69b0947b-d1ae-4fef-bcd9-6e32f1c9cfdf', TIMESTAMPTZ '2022-09-07T11:10:00Z', NULL, TIMESTAMPTZ '2022-09-07T11:40:00Z', 'Draw a picture.', '{}', '583b2835-3d9e-4941-bcea-3a082f9a6aaf');
2022-09-13 14:13:14.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220913111241_Added soft deletion', '6.0.8');
2022-09-13 14:14:57.483 +03:00 [INF] Now listening on: https://localhost:7202
2022-09-13 14:14:57.483 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2022-09-13 14:14:57.712 +03:00 [INF] Now listening on: http://localhost:5285
2022-09-13 14:14:57.716 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-13 14:14:57.718 +03:00 [INF] Hosting environment: Development
2022-09-13 14:14:57.719 +03:00 [INF] Content root path: /Users/eliasa/RiderProjects/SchoolJournal/SchoolJournal.API/
2022-09-13 14:14:58.580 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/index.html - -
2022-09-13 14:14:59.271 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/index.html - - - 200 - text/html;charset=utf-8 696.9063ms
2022-09-13 14:14:59.506 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui.css - -
2022-09-13 14:14:59.520 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui-bundle.js - -
2022-09-13 14:14:59.721 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-09-13 14:14:59.754 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-09-13 14:14:59.757 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui.css - - - 200 143632 text/css 250.5718ms
2022-09-13 14:14:59.757 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui-standalone-preset.js - -
2022-09-13 14:14:59.758 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 238.1922ms
2022-09-13 14:14:59.800 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-09-13 14:14:59.800 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 43.1386ms
2022-09-13 14:15:00.003 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - -
2022-09-13 14:15:00.263 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 259.6987ms
2022-09-13 14:18:00.815 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes/2 - -
2022-09-13 14:18:00.852 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:18:00.980 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:18:02.104 +03:00 [INF] Getting class : ID 2.
2022-09-13 14:18:04.689 +02022-09-13 14:18:25.467 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:18:26.309 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-09-13 14:18:27.041 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__model_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__model_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."DateTimeDeleted" AS "DateTimeDeleted0", t5."EndDateTime", t5."HomeTask", t5."Marks", t5."SubjectJournalId", t4."DateTimeDeleted" AS "DateTimeDeleted1", t4."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."SubjectId" = t4."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t5 ON s0."Id" = t5."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t3 ON t1."Id" = t3."ClassId"
ORDER BY t1."Id", t1."Id0", t2."Id", t3."Id", t3."Id0"
2022-09-13 14:18:27.210 +03:00 [INF] Deleted class successfully : ID 2.
2022-09-13 14:18:35.578 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:18:35.613 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__model_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__model_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."DateTimeDeleted" AS "DateTimeDeleted0", t5."EndDateTime", t5."HomeTask", t5."Marks", t5."SubjectJournalId", t4."DateTimeDeleted" AS "DateTimeDeleted1", t4."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."SubjectId" = t4."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
 2022-09-13 14:18:35.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 14:18:35.632 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API) in 73.6323ms
2022-09-13 14:18:35.6322022-09-13 14:18:43.983 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:18:43.994 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__model_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
F2022-09-13 14:18:44.288 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API) in 437.8027ms
2022-09-13 14:18:44.288 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:18:44.295 +03:00 [WRN] Class NOT FOUND : ID 3.
2022-09-13 14:18:44.300 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=3 - - - 404 - application/json 450.7507ms
2022-09-13 14:18:47.576 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes/2 - -
2022-09-13 14:18:47.577 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:18:47.577 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:18:47.600 +03:00 [INF] Getting class : ID 2.
2022-09-13 14:18:47.605 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:18:47.628 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__request_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."Dat2022-09-13 14:23:32.064 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:23:32.151 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-09-13 14:23:32.244 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__model_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__model_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", 2022-09-13 14:23:32.996 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API) in 986.184ms
2022-09-13 14:23:32.997 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:23:32.998 +03:00 [WRN] An error occurred while saving the entity changes. See the inner exception for details.
2022-09-13 14:23:33.004 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=2 - - - 500 - application/json 1004.7168ms
2022-09-13 14:29:15.271 +03:00 [INF] Application is shutting down...
2022-09-13 14:29:15.474 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
    SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t5 ON s0."Id" = t5."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t3 ON t1."Id" = t3."ClassId"
ORDER BY t1."Id", t1."Id0", t2."Id", t3."Id", t3."Id0"
2022-09-13 14:23:32.877 +03:00 [ERR] Failed executing DbCommand (78ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p8='?' (DbType = Int32), @p4='?' (DbType = Date), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Object), @p12='?' (DbType = Int32), @p9='?' (DbType = Date), @p10='?' (DbType = DateTime), @p11='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Classes" SET "ClassTeacherId" = @p0, "DateTimeDeleted" = @p1, "Number" = @p2
WHERE "Id" = @p3;
UPDATE "Students" SET "Birthday" = @p4, "ClassId" = @p5, "DateTimeDeleted" = @p6, "Names" = @p7
WHERE "Id" = @p8;
UPDATE "Teachers" SET "Birthday" = @p9, "DateTimeDeleted" = @p10, "Names" = @p11
WHERE "Id" = @p12;
2022-09-13 14:23:32.939 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'SchoolJournal.DataAccess.ApplicationContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write OffsetDateTime with Offset=+03 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateAndGetLength(OffsetDateTime value, NpgsqlParameter parameter)
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write OffsetDateTime with Offset=+03 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateAndGetLength(OffsetDateTime value, NpgsqlParameter parameter)
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-09-13 14:23:32.992 +03:00 [ERR] R-FAULT "rabbitmq://localhost/ClassDeleteModel" "04760000-088e-6c40-11da-08da957a63db" SchoolJournal.Primitives.ClassDeleteModel SchoolJournal.ClassService.ClassDeleteModelConsumer("00:00:00.8966873")
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write OffsetDateTime with Offset=+03 to PostgreSQL type 'timestamp with time zone', only offset 0 (UTC) is supported. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateAndGetLength(OffsetDateTime value, NpgsqlParameter parameter)
   at Npgsql.NodaTime.Internal.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SchoolJournal.ClassService.ClassDeleteModelConsumer.Consume(ConsumeContext`1 context)
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.Middleware.ConsumerMessageFilter`2.MassTransit.IFilter<MassTransit.ConsumeContext<TMessage>>.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumerMessageFilter.cs:line 46
2022-09-13 14:29:15.271 +03:00 [INF] Application is shutting down...
2022-09-13 14:29:17.303 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
2022-09-13 14:32:50.200 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:33:20.811 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:33:21.376 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
2022-09-13 14:33:21.427 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
2022-09-13 14:33:21.455 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-09-13 14:33:21.494 +03:00 [INF] Applying migration '20220913113251_Remove offset'.
2022-09-13 14:33:21.621 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Lessons"
WHERE "Id" = '69b0947b-d1ae-4fef-bcd9-6e32f1c9cfdf';
2022-09-13 14:33:21.625 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "SubjectJournal"
WHERE "Id" = '583b2835-3d9e-4941-bcea-3a082f9a6aaf';
2022-09-13 14:33:21.638 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Teachers" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.640 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Subjects" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.643 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubjectJournal" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.646 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Students" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.648 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Lessons" ALTER COLUMN "EndDateTime" TYPE timestamp without time zone;
2022-09-13 14:33:21.650 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Lessons" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.652 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Lessons" ALTER COLUMN "BeginDateTime" TYPE timestamp without time zone;
2022-09-13 14:33:21.654 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Classes" ALTER COLUMN "DateTimeDeleted" TYPE timestamp without time zone;
2022-09-13 14:33:21.657 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SubjectJournal" ("Id", "ClassId", "DateTimeDeleted", "SubjectId", "TeacherId")
VALUES ('1f59d881-85b4-4f1d-bb2e-c37c9c8e9497', 1, NULL, 1, 1);
2022-09-13 14:33:21.659 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Lessons" ("Id", "BeginDateTime", "DateTimeDeleted", "EndDateTime", "HomeTask", "Marks", "SubjectJournalId")
VALUES ('d13912bb-83fa-4eca-8034-3f688df04cba', TIMESTAMP '2022-09-07T11:10:00', NULL, TIMESTAMP '2022-09-07T11:40:00', 'Draw a picture.', '{}', '1f59d881-85b4-4f1d-bb2e-c37c9c8e9497');
2022-09-13 14:33:21.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220913113251_Remove offset', '6.0.8');
2022-09-13 14:35:20.249 +03:00 [INF] Now listening on: https://localhost:7202
2022-09-13 14:35:20.268 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2022-09-13 14:35:20.354 +03:00 [INF] Now listening on: http://localhost:5285
2022-09-13 14:35:20.358 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-13 14:35:20.358 +03:00 [INF] Hosting environment: Development
2022-09-13 14:35:20.359 +03:00 [INF] Content root path: /Users/eliasa/RiderProjects/SchoolJournal/SchoolJournal.API/
2022-09-13 14:35:21.085 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/index.html - -
2022-09-13 14:35:21.701 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/index.html - - - 200 - text/html;charset=utf-8 627.6144ms
2022-09-13 14:35:22.413 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - -
2022-09-13 14:35:22.737 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 323.9648ms
2022-09-13 14:35:49.833 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=2 - -
2022-09-13 14:35:49.870 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:35:49.967 +03:00 [INF] Route matched with {action = "Delete", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:35:56.495 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 14:35:56.529 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API) in 6548.356ms
2022-09-13 14:35:56.532 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:35:56.541 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=2 - - - 200 - application/json;+charset=utf-8 6707.8313ms
2022-09-13 14:35:59.762 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=2 - -
2022-09-13 14:35:59.771 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:35:59.771 +03:00 [INF] Route matched with {action = "Delete", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:36:00.164 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API) in 392.2647ms
2022-09-13 14:36:00.164 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Delete (SchoolJournal.API)'
2022-09-13 14:36:00.175 +03:00 [WRN] Class NOT FOUND : ID 2.
2022-09-13 14:36:00.179 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7202/api/Classes?id=2 - - - 404 - application/json 416.9682ms
2022-09-13 14:36:07.223 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes - -
2022-09-13 14:36:07.228 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:36:07.239 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:36:08.150 +03:00 [INF] Getting all classes.
2022-09-13 14:36:11.101 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:36:12.167 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-09-13 14:36:12.869 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id", t1."Id", t1."Birthday", t1."ClassId", t1."DateTimeDeleted", t1."Names", t0."Birthday", t0."DateTimeDeleted", t0."Names", t2."Id", t2."ClassId", t2."DateTimeDeleted", t2."SubjectId", t2."TeacherId", t2."Id0", t2."Id1", t2."BeginDateTime", t2."DateTimeDeleted0", t2."EndDateTime", t2."HomeTask", t2."Marks", t2."SubjectJournalId", t2."DateTimeDeleted1", t2."Name"
FROM "Classes" AS c
INNER JOIN (
    SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
    FROM "Teachers" AS t
    WHERE (t."DateTimeDeleted" IS NULL)
) AS t0 ON c."ClassTeacherId" = t0."Id"
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t1 ON c."Id" = t1."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t3."Id" AS "Id0", t4."Id" AS "Id1", t4."BeginDateTime", t4."DateTimeDeleted" AS "DateTimeDeleted0", t4."EndDateTime", t4."HomeTask", t4."Marks", t4."SubjectJournalId", t3."DateTimeDeleted" AS "DateTimeDeleted1", t3."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t3 ON s0."SubjectId" = t3."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."Id" = t4."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t2 ON c."Id" = t2."ClassId"
WHERE (c."DateTimeDeleted" IS NULL)
ORDER BY c."Id", t0."Id", t1."Id", t2."Id", t2."Id0"
2022-09-13 14:36:13.083 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 5843.4556ms
2022-09-13 14:36:13.083 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:36:13.091 +03:00 [WRN] Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[SchoolJournal.DataAccess.Primitives.Class, SchoolJournal.DataAccess.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[SchoolJournal.Primitives.ClassViewModel, SchoolJournal.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2022-09-13 14:36:13.132 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes - - - 500 - application/json 5909.5073ms
2022-09-13 14:36:58.258 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes - -
2022-09-13 14:36:58.259 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:36:58.259 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:36:58.261 +03:00 [INF] Getting all classes.
2022-09-13 14:36:58.277 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:36:58.314 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id", t1."Id", t1."Birthday", t1."ClassId", t1."DateTimeDeleted", t1."Names", t0."Birthday", t0."DateTimeDeleted", t0."Names", t2."Id", t2."ClassId", t2."DateTimeDeleted", t2."SubjectId", t2."TeacherId", t2."Id0", t2."Id1", t2."BeginDateTime", t2."DateTimeDeleted0", t2."EndDateTime", t2."HomeTask", t2."Marks", t2."SubjectJournalId", t2."DateTimeDeleted1", t2."Name"
FROM "Classes" AS c
INNER JOIN (
    SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
    FROM "Teachers" AS t
    WHERE (t."DateTimeDeleted" IS NULL)
) AS t0 ON c."ClassTeacherId" = t0."Id"
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t1 ON c."Id" = t1."ClassI2022-09-13 14:38:03.678 +03:00 [INF] Application is shutting down...
2022-09-13 14:38:03.862 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
BeginDateTime", t4."DateTimeDeleted" AS "DateTimeDeleted0", t4."EndDateTime", t4."HomeTask", t4."Marks", t4."SubjectJournalId", t3."DateTimeDeleted" AS "DateTimeDeleted1", t3."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t3 ON s0."SubjectId" = t3."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."Id" = t4."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t2 ON c."Id" = t2."ClassId"
WHERE (c."DateTimeDeleted" IS NULL)
ORDER BY c."Id", t0."Id", t1."Id", t2."Id", t2."Id0"
2022-09-13 14:36:58.321 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 60.9935ms
2022-09-13 14:36:58.321 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:36:58.322 +03:00 [WRN] Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[SchoolJournal.DataAccess.Primitives.Class, SchoolJournal.DataAccess.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[SchoolJournal.Primitives.ClassViewModel, SchoolJournal.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2022-09-13 14:36:58.323 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes - - - 500 - application/json 64.9449ms
2022-09-13 14:37:40.496 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes - -
2022-09-13 14:37:40.501 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:37:40.501 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:37:41.384 +03:00 [INF] Getting all classes.
2022-09-13 14:37:41.530 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:37:41.538 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id", t1."Id", t1."Birthday", t1."ClassId", t1."DateTimeDeleted", t1."Names", t0."Birthday", t0."DateTimeDeleted", t0."Names", t2."Id", t2."ClassId", t2."DateTimeDeleted", t2."SubjectId", t2."TeacherId", t2."Id0", t2."Id1", t2."BeginDateTime", t2."DateTimeDeleted0", t2."EndDateTime", t2."HomeTask", t2."Marks", t2."SubjectJournalId", t2."DateTimeDeleted1", t2."Name"
FROM "Classes" AS c
INNER JOIN (
    SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
    FROM "Teachers" AS t
    WHERE (t."DateTimeDeleted" IS NULL)
) AS t0 ON c."ClassTeacherId" = t0."Id"
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t1 ON c."Id" = t1."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t3."Id" AS "Id0", t4."Id" AS "Id1", t4."BeginDateTime", t4."DateTimeDeleted" AS "DateTimeDeleted0", t4."EndDateTime", t4."HomeTask", t4."Marks", t4."SubjectJournalId", t3."DateTimeDeleted" AS "DateTimeDeleted1", t3."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t3 ON s0."SubjectId" = t3."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."Id" = t4."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t2 ON c."Id" = t2."ClassId"
WHERE (c."DateTimeDeleted" IS NULL)
ORDER BY c."Id", t0."Id", t1."Id", t2."Id", t2."Id0"
2022-09-13 14:37:41.540 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 164.0192ms
2022-09-13 14:37:41.541 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:37:41.541 +03:00 [WRN] Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[SchoolJournal.DataAccess.Primitives.Class, SchoolJournal.DataAccess.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[SchoolJournal.Primitives.ClassViewModel, SchoolJournal.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2022-09-13 14:37:41.543 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes - - - 500 - application/json 1046.4954ms
2022-09-13 14:37:57.901 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes - -
2022-09-13 14:37:57.913 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:37:57.913 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:37:57.914 +03:00 [INF] Getting all classes.
2022-09-13 14:37:57.916 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:37:57.940 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id", t1."Id", t1."Birthday", t1."ClassId", t1."DateTimeDeleted", t1."Names", t0."Birthday", t0."DateTimeDeleted", t0."Names", t2."Id", t2."ClassId", t2."DateTimeDeleted", t2."SubjectId", t2."TeacherId", t2."Id0", t2."Id1", t2."BeginDateTime", t2."DateTimeDeleted0", t2."EndDateTime", t2."HomeTask", t2."Marks", t2."SubjectJournalId", t2."DateTimeDeleted1", t2."Name"
FROM "Classes" AS c
INNER JOIN (
    SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
    FROM "Teachers" AS t
    WHERE (t."DateTimeDeleted" IS NULL)
) AS t0 ON c."ClassTeacherId" = t0."Id"
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t1 ON c."Id" = t1."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t3."Id" AS "Id0", t4."Id" AS "Id1", t4."BeginDateTime", t4."DateTimeDeleted" AS "DateTimeDeleted0", t4."EndDateTime", t4."HomeTask", t4."Marks", t4."SubjectJournalId", t3."DateTimeDeleted" AS "DateTimeDeleted1", t3."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t3 ON s0."SubjectId" = t3."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."Id" = t4."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t2 ON c."Id" = t2."ClassId"
WHERE (c."DateTimeDeleted" IS NULL)
ORDER BY c."Id", t0."Id", t1."Id", t2."Id", t2."Id0"
2022-09-13 14:37:57.948 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 34.2712ms
2022-09-13 14:37:57.949 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:37:57.950 +03:00 [WRN] Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[SchoolJournal.DataAccess.Primitives.Class, SchoolJournal.DataAccess.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[SchoolJournal.Primitives.ClassViewModel, SchoolJournal.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2022-09-13 14:37:57.954 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes - - - 500 - application/json 52.7107ms
2022-09-13 14:38:03.650 +03:00 [INF] Application is shutting down...
2022-09-13 14:38:03.842 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
2022-09-13 14:38:16.613 +03:00 [INF] Configured endpoint ClassCreateModel, Consumer: SchoolJournal.ClassService.ClassCreateModelConsumer
2022-09-13 14:38:16.770 +03:00 [INF] Configured endpoint ClassDeleteModel, Consumer: SchoolJournal.ClassService.ClassDeleteModelConsumer
2022-09-13 14:38:17.228 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-13 14:38:17.235 +03:00 [INF] Hosting environment: Development
2022-09-13 14:38:17.240 +03:00 [INF] Content root path: /Users/eliasa/RiderProjects/SchoolJournal/SchoolJournal.ClassService
2022-09-13 14:38:18.389 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2022-09-13 14:41:54.851 +03:00 [INF] Application is shutting down...
2022-09-13 14:41:55.186 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
alhost/"
2022-09-13 14:38:26.258 +03:00 [INF] Now listening on: http://localhost:5285
2022-09-13 14:38:26.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-13 14:38:26.263 +03:00 [INF] Hosting environment: Development
2022-09-13 14:38:26.264 +03:00 [INF] Content root path: /Users/eliasa/RiderProjects/SchoolJournal/SchoolJournal.API/
2022-09-13 14:38:26.789 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/index.html - -
2022-09-13 14:38:27.500 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/index.html - - - 200 - text/html;charset=utf-8 718.2187ms
2022-09-13 14:38:27.990 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - -
2022-09-13 14:38:28.400 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 410.0880ms
2022-09-13 14:38:32.711 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes - -
2022-09-13 14:38:32.734 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:38:32.783 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 14:38:33.841 +03:00 [INF] Getting all classes.
2022-09-13 14:38:36.483 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 14:38:37.489 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-09-13 14:38:38.297 +03:00 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id", t1."Id", t1."Birthday", t1."ClassId", t1."DateTimeDeleted", t1."Names", t0."Birthday", t0."DateTimeDeleted", t0."Names", t2."Id", t2."ClassId", t2."DateTimeDeleted", t2."SubjectId", t2."TeacherId", t2."Id0", t2."Id1", t2."BeginDateTime", t2."DateTimeDeleted0", t2."EndDateTime", t2."HomeTask", t2."Marks", t2."SubjectJournalId", t2."DateTimeDeleted1", t2."Name"
FROM "Classes" AS c
INNER JOIN (
    SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
    FROM "Teachers" AS t
    WHERE (t."DateTimeDeleted" IS NULL)
) AS t0 ON c."ClassTeacherId" = t0."Id"
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t1 ON c."Id" = t1."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t3."Id" AS "Id0", t4."Id" AS "Id1", t4."BeginDateTime", t4."DateTimeDeleted" AS "DateTimeDeleted0", t4."EndDateTime", t4."HomeTask", t4."Marks", t4."SubjectJournalId", t3."DateTimeDeleted" AS "DateTimeDeleted1", t3."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t3 ON s0."SubjectId" = t3."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."Id" = t4."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t2 ON c."Id" = t2."ClassId"
WHERE (c."DateTimeDeleted" IS NULL)
ORDER BY c."Id", t0."Id", t1."Id", t2."Id", t2."Id0"
2022-09-13 14:38:38.572 +03:00 [INF] Got all classes successfully.
2022-09-13 14:38:38.626 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SchoolJournal.Primitives.ClassViewModel, SchoolJournal.Primitives, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-09-13 14:38:38.701 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 5897.8203ms
2022-09-13 14:38:38.704 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 14:38:38.767 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes - - - 200 - application/json;+charset=utf-8 6055.6623ms
2022-09-13 14:41:54.854 +03:00 [INF] Application is shutting down...
2022-09-13 14:41:55.065 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
2022-09-13 15:08:24.369 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2022-09-13 15:08:24.450 +03:00 [INF] Now listening on: https://localhost:7202
2022-09-13 15:08:25.512 +03:00 [INF] Now listening on: http://localhost:5285
2022-09-13 15:08:25.512 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-09-13 15:08:25.513 +03:00 [INF] Hosting environment: Development
2022-09-13 15:08:25.513 +03:00 [INF] Content root path: /Users/eliasa/RiderProjects/SchoolJournal/SchoolJournal.API/
2022-09-13 15:08:25.807 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/index.html - -
2022-09-13 15:08:26.988 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/index.html - - - 200 - text/html;charset=utf-8 1208.2094ms
2022-09-13 15:08:27.389 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - -
2022-09-13 15:08:27.789 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 399.6781ms
2022-09-13 15:09:13.745 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7202/api/Classes application/json 132
2022-09-13 15:09:13.763 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Post (SchoolJournal.API)'
2022-09-13 15:09:13.815 +03:00 [INF] Route matched with {action = "Post", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(SchoolJournal.Primitives.ClassCreateModel) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:09:20.591 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:09:20.621 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Post (SchoolJournal.API) in 6790.9329ms
2022-09-13 15:09:20.624 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Post (SchoolJournal.API)'
2022-09-13 15:09:20.633 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7202/api/Classes application/json 132 - 200 - application/json;+charset=utf-8 6888.4562ms
2022-09-13 15:10:34.335 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 145
2022-09-13 15:10:34.345 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:10:34.358 +03:00 [INF] Route matched with {action = "Put", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(SchoolJournal.Primitives.ClassUpdateModel) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:10:34.771 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:10:34.772 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API) in 413.4531ms
2022-09-13 15:10:34.772 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:10:34.773 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 145 - 200 - application/json;+charset=utf-8 437.5458ms
2022-09-13 15:13:28.033 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 145
2022-09-13 15:13:28.053 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:13:28.054 +03:00 [INF] Route matched with {action = "Put", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(SchoolJournal.Primitives.ClassUpdateModel) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:13:28.306 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:13:28.309 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API) in 253.7758ms
2022-09-13 15:13:28.311 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:13:28.313 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 145 - 200 - application/json;+charset=utf-8 279.7332ms
2022-09-13 15:15:12.204 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes/3 - -
2022-09-13 15:15:12.208 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 15:15:12.236 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:15:13.249 +03:00 [INF] Getting class : ID 3.
2022-09-13 15:15:16.161 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 15:15:17.081 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2022-09-13 15:15:17.813 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__request_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."DateTimeDeleted" AS "DateTimeDeleted0", t5."EndDateTime", t5."HomeTask", t5."Marks", t5."SubjectJournalId", t4."DateTimeDeleted" AS "DateTimeDeleted1", t4."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."SubjectId" = t4."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t5 ON s0."Id" = t5."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t3 ON t1."Id" = t3."ClassId"
ORDER BY t1."Id", t1."Id0", t2."Id", t3."Id", t3."Id0"
2022-09-13 15:15:17.963 +03:00 [INF] Got class successfully : ID 3.
2022-09-13 15:15:17.963 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:15:17.964 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 5727.5722ms
2022-09-13 15:15:17.965 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 15:15:17.992 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes/3 - - - 200 - application/json;+charset=utf-8 5787.9686ms
2022-09-13 15:15:45.299 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 69
2022-09-13 15:15:45.307 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:15:45.308 +03:00 [INF] Route matched with {action = "Put", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(SchoolJournal.Primitives.ClassUpdateModel) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:15:45.479 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:15:45.480 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API) in 171.9653ms
2022-09-13 15:15:45.481 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Put (SchoolJournal.API)'
2022-09-13 15:15:45.481 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7202/api/Classes application/json 69 - 200 - application/json;+charset=utf-8 181.9807ms
2022-09-13 15:15:49.970 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7202/api/Classes/3 - -
2022-09-13 15:15:49.970 +03:00 [INF] Executing endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 15:15:49.971 +03:00 [INF] Route matched with {action = "Get", controller = "Classes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller SchoolJournal.API.Controllers.ClassesController (SchoolJournal.API).
2022-09-13 15:15:49.973 +03:00 [INF] Getting class : ID 3.
2022-09-13 15:15:49.977 +03:00 [INF] Entity Framework Core 6.0.8 initialized 'ApplicationContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.6+6fa8f3c27a7c241a66e72a6c09e0b252509215d0' with options: using NodaTime 
2022-09-13 15:15:50.019 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__request_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t1."Id", t1."ClassTeacherId", t1."DateTimeDeleted", t1."Number", t1."Id0", t2."Id", t2."Birthday", t2."ClassId", t2."DateTimeDeleted", t2."Names", t1."Birthday", t1."DateTimeDeleted0", t1."Names", t3."Id", t3."ClassId", t3."DateTimeDeleted", t3."SubjectId", t3."TeacherId", t3."Id0", t3."Id1", t3."BeginDateTime", t3."DateTimeDeleted0", t3."EndDateTime", t3."HomeTask", t3."Marks", t3."SubjectJournalId", t3."DateTimeDeleted1", t3."Name"
FROM (
    SELECT c."Id", c."ClassTeacherId", c."DateTimeDeleted", c."Number", t0."Id" AS "Id0", t0."Birthday", t0."DateTimeDeleted" AS "DateTimeDeleted0", t0."Names"
    FROM "Classes" AS c
    INNER JOIN (
        SELECT t."Id", t."Birthday", t."DateTimeDeleted", t."Names"
        FROM "Teachers" AS t
        WHERE (t."DateTimeDeleted" IS NULL)
    ) AS t0 ON c."ClassTeacherId" = t0."Id"
    WHERE ((c."DateTimeDeleted" IS NULL)) AND (c."Id" = @__request_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."DateTimeDeleted" AS "DateTimeDeleted0", t5."EndDateTime", t5."HomeTask", t5."Marks", t5."SubjectJournalId", t4."DateTimeDeleted" AS "DateTimeDeleted1", t4."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."SubjectId" = t4."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t5 ON s0."Id" = t5."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t3 ON t1."Id" = t3."ClassId"
ORDER BY t1."Id", t1."Id0", t2."Id", t3."Id", t3."Id0"
2022-09-13 15:15:50.021 +03:00 [INF] Got class successfully : ID 3.
2022-09-13 15:15:50.022 +03:00 [INF] Executing OkObjectResult, writing value of type 'SchoolJournal.Primitives.ClassViewModel'.
2022-09-13 15:15:50.022 +03:00 [INF] Executed action SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API) in 50.8378ms
2022-09-13 15:15:50.022 +03:00 [INF] Executed endpoint 'SchoolJournal.API.Controllers.ClassesController.Get (SchoolJournal.API)'
2022-09-13 15:15:50.022 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7202/api/Classes/3 - - - 200 - application/json;+charset=utf-8 52.5360ms
2022-09-13 15:16:42.393 +03:00 [INF] Application is shutting down...
2022-09-13 15:16:42.648 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
D (c."Id" = @__model_Id_0)
    LIMIT 1
) AS t1
LEFT JOIN (
    SELECT s."Id", s."Birthday", s."ClassId", s."DateTimeDeleted", s."Names"
    FROM "Students" AS s
    WHERE (s."DateTimeDeleted" IS NULL)
) AS t2 ON t1."Id" = t2."ClassId"
LEFT JOIN (
    SELECT s0."Id", s0."ClassId", s0."DateTimeDeleted", s0."SubjectId", s0."TeacherId", t4."Id" AS "Id0", t5."Id" AS "Id1", t5."BeginDateTime", t5."DateTimeDeleted" AS "DateTimeDeleted0", t5."EndDateTime", t5."HomeTask", t5."Marks", t5."SubjectJournalId", t4."DateTimeDeleted" AS "DateTimeDeleted1", t4."Name"
    FROM "SubjectJournal" AS s0
    INNER JOIN (
        SELECT s1."Id", s1."DateTimeDeleted", s1."Name"
        FROM "Subjects" AS s1
        WHERE (s1."DateTimeDeleted" IS NULL)
    ) AS t4 ON s0."SubjectId" = t4."Id"
    LEFT JOIN (
        SELECT l."Id", l."BeginDateTime", l."DateTimeDeleted", l."EndDateTime", l."HomeTask", l."Marks", l."SubjectJournalId"
        FROM "Lessons" AS l
        WHERE (l."DateTimeDeleted" IS NULL)
    ) AS t5 ON s0."Id" = t5."SubjectJournalId"
    WHERE (s0."DateTimeDeleted" IS NULL)
) AS t3 ON t1."Id" = t3."ClassId"
ORDER BY t1."Id", t1."Id0", t2."Id", t3."Id", t3."Id0"
2022-09-13 15:15:45.453 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p7='?' (DbType = Int32), @p4='?' (DbType = Date), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Classes" SET "ClassTeacherId" = @p0, "DateTimeDeleted" = @p1, "Number" = @p2
WHERE "Id" = @p3;
UPDATE "Teachers" SET "Birthday" = @p4, "DateTimeDeleted" = @p5, "Names" = @p6
WHERE "Id" = @p7;
2022-09-13 15:15:45.464 +03:00 [INF] Updated class successfully : ID 3.
2022-09-13 15:16:42.393 +03:00 [INF] Application is shutting down...
2022-09-13 15:16:42.595 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
